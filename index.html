const express = require('express');
const app = express();
const port = 3000;

// Permitir o envio de JSON e servir arquivos estáticos
app.use(express.static('public'));
app.use(express.json());

// Rota para gerar um número aleatório entre 1 e 100
let numeroSecreto = Math.floor(Math.random() * 100) + 1;
let tentativas = 0;

// Endpoint para fazer a tentativa
app.post('/adivinhar', (req, res) => {
    const palpite = req.body.palpite;
    tentativas++;

    let resposta = '';
    if (palpite < numeroSecreto) {
        resposta = 'O número é maior!';
    } else if (palpite > numeroSecreto) {
        resposta = 'O número é menor!';
    } else {
        resposta = `Parabéns! Você acertou em ${tentativas} tentativas!`;
        // Resetando o jogo
        numeroSecreto = Math.floor(Math.random() * 100) + 1;
        tentativas = 0;
    }

    res.json({ resposta, tentativas });
});

app.listen(port, () => {
    console.log(`Servidor rodando em http://localhost:${port}`);
});
